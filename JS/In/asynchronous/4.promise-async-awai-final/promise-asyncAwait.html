<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <ul id="d1">

    </ul>
    <button onclick="getdata()">Get Data</button>
    <button onclick="getCountries()">Get Countries</button>
    <script>
        // fetch is asynchronous means non-blocking code


        //  fetch("https://fakestoreapi.com/products")
        //  .then(function(data){
        //     data.json()
        //     .then(function(res){
        //         console.log(res)
        //     })
        //  })
        //  .catch(function(err){
        //     console.log(err)
        //  })

        /////////////////////////////////////////////////////////////////////////

        // function getdata(){
        //  fetch("https://fakestoreapi.com/products")
        //  .then(function(data){
        //     data.json()
        //     .then(function(res){
        //         console.log(res)
        //     })
        //  })
        //  .catch(function(err){
        //     console.log(err)
        //  })
        // }

        //////////////////////////////////////////////////////////////////////////

        
        // function getCountries(){
        //  fetch("https://restcountries.com/v3/all")
        //  .then(function(data){
        //     data.json()
        //     .then(function(res){
        //         console.log(res)
        //     })
        //  })
        //  .catch(function(err){
        //     console.log(err)
        //  })
        // }

        ////////////////////////////////////////////////////////////////////////////
        ////////////////////////////////////////////////////////////////////////////
        ////////////////////////////////////////////////////////////////////////////
        ////////////////////////////////////////////////////////////////////////////

        // function getAllCountries(){ 
        //     var temp;                                           // service function
        //    temp = fetch("https://restcountries.com/v3/all")     // fetch method is asynchronous non-blocking function or code 
        //    .then(function(data){
        //        data.json()
        //      .then(function(res){
        //         return data
        //       })
        //     })
        //     .catch(function(err){
        //      console.log(err)
        //   })

        //   return temp                   // it is returned before it gets data from server
        // }

        // function getCountries(){
        //     var countries = getAllCountries()
        //     countries.forEah(function(c){
        //       var nli = document.createElement('li')
        //       nli.innerHTML = c.name.common;
        //       document.getElementById("d1").appendChild(nli)
        //     })
        // }

        /////////////////////////////////


        // function getAllCountries(){                   // service function          // get all countries is returing promise object      // getAllCountries() is a promise based method
        //    var p = new Promise(function(resolve,reject){  
        //                                                     // we wite fetch in promise constructor function
        //       fetch("https://restcountries.com/v3/all")     // fetch method is asynchronous non-blocking function or code 
        //       .then(function(data){
        //          data.json()
        //         .then(function(res){
        //            resolve(res)
        //          })
        //        })
        //        .catch(function(err){
        //          reject(err)
        //        })
        //     })    
        //      return p;                                              
        // }

        // function getCountries(){
        //     getAllCountries()
        //     .then(function(data){
        //         // console.log(data)
        //        data.forEach(function(c){
        //         var nli = document.createElement('li')
        //         nli.innerHTML = c.name.common;
        //         document.getElementById("d1").appendChild(nli)
        //        })
        //     })
        //     .catch(function(err){
        //         console.log(err)
        //     })
        // }


        /////////////////////////////////////////////////////////////////////////////////////

        // async function getAllCountries(){                                                                                                         // async function defaultly return promise
        //     var res = await fetch('https://restcountries.com/v3/all')                                                                             // await makes fetch synchronous
        //     var data = await res.json();
        //     return data                                   
        // }

        // function getCountries(){
        //     getAllCountries()
        //     .then(function(data){
        //         // console.log(data)
        //        data.forEach(function(c){
        //         var nli = document.createElement('li')
        //         nli.innerHTML = c.name.common;
        //         document.getElementById("d1").appendChild(nli)
        //        })
        //     })
        //     .catch(function(err){
        //         console.log(err)
        //     })
        // }


        ///////////////////////////////////////////////////////////////////////









        async function getAllCountries(){                                                                                                         
            var res = await fetch('https://restcountries.com/v3/all')                                                                             
            var data = await res.json();
            return data                                   
        }

        function getCountries(){
            getAllCountries()
            .then(function(data){
               console.log(data)
            })
            .catch(function(err){
                console.log(err)
            })
        }















    </script>
</body>
</html>