<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body style="text-align: center; background-color: antiquewhite; font-size: 20px;">
    
    <style>
        img{
            height: 300px;
            width: 300px;
            margin-right: 7px;
            margin-top: 7px;
            border-radius: 5px;
        }
        input{
            margin-bottom: 10px;
        }
    </style>
  <div style=" margin-top: 100px;">
        <h1 style="color: red;">Printing Table</h1>

        <label for="" style="margin-right: 7px;">First Name:   &nbsp</label>
        <input id="fName" type="text" style="height: 20px; width: 190px; outline: none;">
        <br>
        <label for="">Last Name:  &nbsp &nbsp</label>
        <input id="lName" type="text" style="height: 20px; width: 190px; outline: none;">
        <br>
        <label for="" style="margin-right: 73px;">Age: </label>
        <input id="age" type="number" style="height: 20px; width: 190px; outline: none;">
         <br>
        <label for="" style="margin-right: 55px;">city:  &nbsp &nbsp</label>
        <input id="city" type="text" style="height: 20px; width: 190px; outline: none;">
        <br>
        <button id="btn1" onclick="tableCreation()" style="margin-left: 52px; background-color: orange; border: 0px; border-radius: 3px; padding: 7px 20px; margin-right: 15px; margin-top: 19px;">Create Table</button>
        <button id="btn2" onclick="updateTable()" style="margin-left: 52px; background-color: orange; border: 0px; border-radius: 3px; padding: 7px 20px; margin-right: 15px; margin-top: 19px; display: none;">Update Table</button>

        <div style="text-align: center; margin-top: 20px;">
              <table border="1px solid" cellspacing = 0px cellpadding="10px" style="margin-left: 600px;">
                 <thead>
                    <th>First Name</th>
                    <th>Last Name</th>
                    <th>Age</th>
                    <th>City</th>
                    <th>Actions</th>
                 </thead>

                 <tbody id="tbdy">

                 </tbody>
              </table>
        </div>
  </div>


    <script>
    var tableArr = []
    var index = 0;
     function tableCreation(){
        var tableData = {}
        var fname = document.getElementById('fName').value
        var lname = document.getElementById('lName').value
        var age = document.getElementById('age').value
        var city = document.getElementById('city').value
        
        tableData.fName = fname;
        tableData.lName = lname;
        tableData.age = age;
        tableData.city = city;
        tableArr.push(tableData)
        console.log(tableArr)
         
         genUI()
    }

    function updateTable() {
       console.log(tableArr[index]) 
       tableArr[index]['fName'] = document.getElementById("fName").value
       tableArr[index]['lName'] = document.getElementById("lName").value
       tableArr[index]['age'] = document.getElementById("age").value
       tableArr[index]['city'] = document.getElementById("city").value
       console.log(tableArr)
       genUI()
       document.getElementById("btn1").style.display = 'inline-block'
       document.getElementById("btn2").style.display = 'none'
    }


    function genUI() {
        document.getElementById('tbdy').innerHTML = ""
        tableArr.forEach(function(obj,i){
            var tr = document.createElement('tr')

            for(var key in obj){
            var td = document.createElement('td')
            td.innerHTML = obj[key];
            tr.appendChild(td)
            }

            var editbtn = document.createElement('button')
            editbtn.innerHTML = "Edit"
            tr.appendChild(editbtn)
            var deletebtn = document.createElement('button')
            deletebtn.innerHTML = "Delete"
            tr.appendChild(deletebtn)

            editbtn.onclick = function(){
                document.getElementById("fName").value = obj['fName']
                document.getElementById('lName').value = obj['lName']
                document.getElementById('age').value= obj['age']
                document.getElementById('city').value= obj['city']
                index = i
                console.log(index)
                document.getElementById("btn1").style.display = 'none'
                document.getElementById("btn2").style.display = 'inline-block'
            }

            deletebtn.onclick = function(){
                tableArr.splice(i,1)
               genUI()
               console.log(tableArr)
            }

            document.getElementById('tbdy').appendChild(tr)
        })

        document.getElementById("fName").value = ""
        document.getElementById('lName').value = ""
        document.getElementById('age').value= ""
        document.getElementById('city').value=""
    }
           
    

    </script>
</body>
</html>